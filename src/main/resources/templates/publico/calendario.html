<!doctype html>
<html lang="en">

<head th:replace="layout/head :: head">

  
</head>
<link th:href="@{assets/libs/fullcalendar/fullcalendar.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{assets/css/icons.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{assets/css/app.min.css}" rel="stylesheet" type="text/css" />
<style>
    .color-indicators {
        display: flex;
        flex-wrap: wrap; /* Permite que los elementos se envuelvan si el contenedor es demasiado estrecho */
        gap: 10px; /* Espacio entre los indicadores de colores y el texto */
    }
    .lugar-item {
        display: flex;
        align-items: center; /* Centra verticalmente */
        gap: 10px; /* Espacio entre el indicador de color y el texto */
    }
    .color-indicator {
        width: 20px; /* Ancho de los indicadores de colores */
        height: 20px; /* Altura de los indicadores de colores */
        border-radius: 50%; /* Forma redonda */
        box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3); /* Sombra ligera */
        cursor: pointer; /* Cambia el cursor al pasar el ratón */
        transition: transform 0.2s; /* Efecto de escala suave al pasar el ratón */
    }
    .text {
        font-size: 14px; /* Tamaño de fuente del texto */
        color: #333; /* Color del texto */
    }
    .color-indicator:hover {
        transform: scale(1.1); /* Efecto de escala al pasar el ratón */
    }
</style>
<body data-topbar="colored">
    <div id="layout-wrapper">

       
        <div  style="background-color: #f8bd4f;">
            <h1 style="text-align: center;">CALENDARIO DE RESERVAS</h1>
            <div class="page-content">
                <div class="page-title-box" style="background-color: #f8bd4f; ">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                           
                        </div>
                    </div>
                </div>
                <div class="page-content-wrapper">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div th:class="'alert alert-' + (${clase != null} ? ${clase} : info)"
                                                    role="alert" th:if="${mensaje != null}">
                                                    <h4 class="alert-body" th:text="${mensaje}"></h4>
                                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                      
                                        <div class="color-indicators">
                                            <th:block th:each="luga : ${lugaresE}" th:if="${luga.estado_lugar != 'X' }">
                                                <div class="lugar-item">
                                                    <div th:style="'background-color:' + ${luga.color_lugar}" class="color-indicator"></div>
                                                    <div class="text" th:text="${luga.nombre_lugar}"></div>
                                                </div>
                                            </th:block>
                                        </div>
                                          <hr>
                                        <div class="row">
                                            <!--col-xl-2 col-lg-3 col-md-4    col-xl-10 col-lg-9 col-md-8-->
                                            <div id="calendar" class="mt-4 mt-md-0"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="modalEvento" class="modal fade bs-example-modal-xl" tabindex="-1" role="dialog"
                            aria-labelledby="modalEvento" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl">
                                <div class="modal-content">
                                    <div class="modal-header bg-primary">
                                        <strong style="font-size: 24px;" class="text-white modal-title mt-0" id="myExtraLargeModalLabel"></strong>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form th:action="@{/cambiarFechaEventoLugar}" method="post">
                                            <input type="hidden" id="idDetalleActividad" name="idDetalleActividad">
                                            <input type="hidden" id="idLugar" name="idLugar">
                                            <input type="hidden" id="idSubDetAct" name="idSubDetAct">
                                            <div class="row mb-4">
                                              

                                                <div class="col-lg-4 mb-2 col-md-4">
                                                    <label for="fechaActividad" class="col-form-label">Nombre de la Instalación Deportiva:
                                                    </label>
                                                    <div >
                                                        <select class="form-control select2" name="ilugaresA" id="ilugaresA" disabled>
                                                            <option th:each=" l : ${lugaresE}" th:value="${l.id_lugar}" th:text="${l.nombre_lugar}"></option>
                                                        </select>
                                                    </div>
                                                    <!-- <div >
                                                        <input type="datetime" class="form-control" id="lugarActividad" disabled>
                                                    </div> -->
                                                    
                                                </div>
                                                <div class="col-lg-4 mb-2 col-md-2">
                                                    <label for="fechaActividad" class="col-form-label">Fecha de Reserva:
                                                    </label>
                                                    <div >
                                                        <input type="datetime" class="form-control" id="fechaActividad" name="fechaActividad" disabled>
                                                    </div>
                                                    
                                                    <!-- <div >
                                                        <input type="datetime" class="form-control" id="fechaActividad" disabled>
                                                    </div> -->
                                                </div>
                                                <div class="col-lg-2 mb-2 col-md-2">
                                                    <label for="horaInicio" class="col-form-label">Hora inicio: </label>
                                                    <div >
                                                        <input type="time" class="form-control" id="horaInicio" name="horaInicio" disabled>
                                                    </div>
                                                    <!-- <div >
                                                        <input type="time" class="form-control" id="horaInicio" disabled>
                                                    </div> -->
                                                    
                                                </div>
                                                <div class="col-lg-2 mb-2 col-md-2">
                                                    <label for="horaFin" class="col-form-label">Hora fin: </label>
                                                    <div >
                                                        <input type="time" class="form-control" id="horaFin" name="horaFin" disabled>
                                                    </div>
                                                    <!-- <div th:if="${unidad.id_unidad_funcional!=1 }">
                                                        <input type="time" class="form-control" id="horaFin" disabled>
                                                    </div> -->
                                                    
                                                </div>

                                              
                                                    <div class="col-lg-4 mb-3 col-md-4">
                                                        <label for="observacion" class="col-form-label">Observacion: </label>
                                                       
                                                            <textarea  class="form-control" rows="3" id="observacion" name="observacion" disabled></textarea>
                                                     
                                                      
                                                        
                                                    </div>
    
                                              
                                            </div>
                                            <!-- <div class="text-center" th:if="${unidad.id_unidad_funcional==1 }">
                                                <input class="btn btn-primary" type="submit" value="Actualizar">
                                            </div> -->
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                      
                        <div id="modalSolicitud" class="modal fade bs-example-modal-xl" tabindex="-1" role="dialog"
                            aria-labelledby="modalSolicitud" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl">
                                <div class="modal-content">
                                    <div class="modal-header bg-primary">
                                        <h5 class="text-white modal-title mt-0" id="myExtraLargeModalLabel"></h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row mb-4">
                                           <table id="example1" class="table table-striped table-bordered dt-responsive"
                                                style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                                <thead style="font-size:12px;">
                                                    <th>#</th>
                                                    <th>Unidad Solicitante</th>
                                                    <th>Actividad</th>
                                                    <th>Fecha</th>
                                                    <th>Hora</th>
                                                    <th>Lugar</th>
                                                    <th>Opciones</th>
                                                </thead>
                                                <tbody style="font-size:12px;">
                                                    <tr th:each="e:${eventosSolicitados}">
                                                        <td th:text="${e.actividad.id_actividad}"></td>
                                                        <td th:text="${e.actividad.unidadFuncional.nom_unidad}"></td>
                                                        <td th:text="${e.actividad.descripcion_actividad}"></td>
                                                        <td>
                                                            <div th:each="da,ind:${e.actividad.detalleActividads}" th:if="${da.estado!='X'}" >
                                                                <div th:each="sda:${da.subDetalleActividads}" th:if="${sda.estado!='X'}">
                                                                    <div th:each="ll : ${sda.lugares}" th:if="${ll.tipo_lugar=='E'}" 
                                                                    th:text="${#dates.format(da.fecha_detalle_actividad,'EEEE d MMMM')}"></div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div th:each="da,ind:${e.actividad.detalleActividads}" th:if="${da.estado!='X'}" >
                                                                <div th:each="sda:${da.subDetalleActividads}" th:if="${sda.estado!='X'}">
                                                                    <div th:each="ll : ${sda.lugares}" th:if="${ll.tipo_lugar=='E'}" 
                                                                    th:text="${sda.hora_inicio}+' - '+${sda.hora_final}"></div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td th:text="${e.lugar.nombre_lugar}"></td>
                                                        <td>
                                                            <!--<a style="font-size: 14px;" th:onclick="modificarFechaHora([[${e.actividad.id_actividad}]])" href="#" data-toggle="tooltip" data-placement="top" title="Modificar"><i
                                                                class="far fa-edit"></i></a> editar fecha hora-->
                                                            <a style="font-size: 18px;" th:onclick="AgendarEvento([[${e.id_evento}]])" href="#" data-toggle="tooltip" data-placement="top" title="Confirmar">
                                                               <!--<i class="mdi mdi-check-underline-circle-outline"></i>-->Aceptar</a><!-- confirmar evento-->
                                                        </td>
                                                    </tr>
                                                </tbody>
                                           </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="modalReporte" class="modal fade bs-example-modal-xl" tabindex="-1" role="dialog"
                            aria-labelledby="modalReporte" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl">
                                <div class="modal-content">
                                    <div class="modal-header bg-primary">
                                        <h5 class="text-white modal-title mt-0" id="myExtraLargeModalLabel"></h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row mb-4">
                                           <h1>EN PROCESO DE ELABORACION EN 4(dias)</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--confirmar-->
                        <div class="modal fade" tabindex="-1" id="ModalPro" role="dialog"
                            aria-labelledby="myLargeModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content" style="background-color: rgb(233, 236, 181);">

                                    <form th:action="@{/confirmarEvento}" method="post">
                                        <input type="hidden" id="id_activida" name="id_activida">
                                        <div class="modal-header bg-warning">
                                            <h5 class="modal-title" id="nombre"></h5>
                                        </div>
                                        <div class="modal-body">
                                            <div class="text-center"><img src="../../../../assets/images/interrogacion.png" 
                                                style="width: 30%; height: 20%; background-repeat: no-repeat;" alt="" height="22">
                                                <h3>¿ESTA SEGURO DE CONFIRMAR EFENTO EN LA FECHA Y HORA INDICADA?</h3>
                                            </div>
                                            
                                            <br>
                                            <div class="row">
                                                <div class="col-12 text-center">
                                                    <button type="submit" class="btn btn-primary me-1"
                                                        data-bs-dismiss="modal">Confirmar</button>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        <div class="container-fluid" style="background-color: white; padding: 10px; margin: 10px 0;">
            <div class="row">
                <div class="col-sm-6">
                    2024 © USIC.
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-right d-none d-sm-block">
                        UAP <i class="mdi mdi-heart text-danger"></i> DIGITAL
                    </div>
                </div>
            </div>
        </div>
    
        </div>
      
    </div>
  

    <div class="rightbar-overlay"></div>
    <!-- JAVASCRIPT -->
    <script th:src="@{assets/libs/datatables.net/js/jquery.dataTables.min.js}"></script>
    <script th:src="@{assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js}"></script>
    <script th:src="@{assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
    <script th:src="@{assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js}"></script>

    <script th:src="@{assets/libs/jquery/jquery.min.js}"></script>
    <script th:src="@{assets/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{assets/libs/metismenu/metisMenu.min.js}"></script>
    <script th:src="@{assets/libs/simplebar/simplebar.min.js}"></script>
    <script th:src="@{assets/libs/node-waves/waves.min.js}"></script>

    <script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>

    <!-- plugin js -->
    <script th:src="@{assets/libs/moment/min/moment.min.js}"></script>
    <script th:src="@{/assets/libs/jquery-ui-dist/jquery-ui.min.js}"></script>
    <script th:src="@{/assets/js/app.js}"></script>

    <script th:src="@{assets/libs/fullcalendar/fullcalendar.min.js}"></script>
    <script th:src="@{assets/libs/fullcalendar/locale/es.js}"></script>

    <script th:src="@{assets/js/pages/calendar.init.js}"></script>
    <script>

        $(function() {
      
          $('#calendar').fullCalendar({
            locale: 'es'
          });
      
        });
      
      </script>
   
    
    <script type="">
            function modificarFechaHora(id_actividad) {
                var id_ac = id_actividad;
                //alert(id_pro);
                $.getJSON("/sacarLugarPorProgramacion", {
                    idActividad: id_ac,
                    ajax: 'true'
                }, function (data) {
                    var html = '<option value="">--Lugares--</option>';
                    var len = data.length;
                    for (var i = 0; i < len; i++) {
                        html += '<option value="' + data[i].id_lugar + '">'
                            + data[i].nombre_lugar + '</option>';
                    }
                    html += '</option>';
                    $('#idlugars').html(html);
                    $("#ModalFechaProgramacion").modal("show");
                });
            }
    </script>
    <script>
        function AgendarEvento(id_evento) {
            var id_ev = id_evento;
            
            $('#id_activida').val(id_ev);
            $("#nombre").text('Actividad # : '+id_ev);
            $("#ModalPro").modal("show");
        }
    </script>
</body>

</html>